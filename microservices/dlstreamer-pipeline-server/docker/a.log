#0 building with "default" instance using docker driver

#1 [dlstreamer-pipeline-server internal] load build definition from Dockerfile
#1 transferring dockerfile: 13.99kB done
#1 WARN: InvalidDefaultArgInFrom: Default value for ARG ${BASE_IMAGE} results in empty or invalid base image name (line 2)
#1 WARN: InvalidDefaultArgInFrom: Default value for ARG ${BASE_IMAGE} results in empty or invalid base image name (line 103)
#1 WARN: UndefinedVar: Usage of undefined variable '$WORKDIR' (line 37)
#1 WARN: UndefinedVar: Usage of undefined variable '$WORKDIR' (line 38)
#1 WARN: UndefinedVar: Usage of undefined variable '$WORKDIR' (line 40)
#1 WARN: UndefinedVar: Usage of undefined variable '$WORKDIR' (line 41)
#1 WARN: UndefinedVar: Usage of undefined variable '$WORKDIR' (line 42)
#1 WARN: UndefinedVar: Usage of undefined variable '$LIBRARY_PATH' (line 78)
#1 WARN: UndefinedVar: Usage of undefined variable '$CPLUS_INCLUDE_PATH' (line 78)
#1 WARN: UndefinedVar: Usage of undefined variable '$C_INCLUDE_PATH' (line 78)
#1 WARN: UndefinedVar: Usage of undefined variable '$WORKDIR' (line 133)
#1 WARN: UndefinedVar: Usage of undefined variable '$WORKDIR' (line 134)
#1 WARN: UndefinedVar: Usage of undefined variable '$LIBRARY_PATH' (line 142)
#1 WARN: UndefinedVar: Usage of undefined variable '$CPLUS_INCLUDE_PATH' (line 142)
#1 WARN: UndefinedVar: Usage of undefined variable '$C_INCLUDE_PATH' (line 142)
#1 WARN: LegacyKeyValueFormat: "ENV key=value" should be used instead of legacy "ENV key value" format (line 186)
#1 DONE 0.0s

#2 [dlstreamer-pipeline-server internal] load metadata for docker.io/intel/dlstreamer:2025.0.1.3-ubuntu22
#2 DONE 0.0s

#3 [dlstreamer-pipeline-server internal] load .dockerignore
#3 transferring context: 215B done
#3 DONE 0.0s

#4 [dlstreamer-pipeline-server gstudfloader-builder  1/16] FROM docker.io/intel/dlstreamer:2025.0.1.3-ubuntu22
#4 DONE 0.0s

#5 [dlstreamer-pipeline-server internal] load build context
#5 transferring context: 11.98kB done
#5 DONE 0.0s

#6 [dlstreamer-pipeline-server gstudfloader-builder 15/16] RUN export no_proxy= &&     apt-get update &&     apt-get install -y -q --no-install-recommends libdrm-dev=* &&     apt-get clean &&     rm -rf /var/lib/apt/lists/*
#6 CACHED

#7 [dlstreamer-pipeline-server dlstreamer-pipeline-server 15/47] RUN pip3 install --no-cache-dir ntplib==0.4.0
#7 CACHED

#8 [dlstreamer-pipeline-server dlstreamer-pipeline-server 42/47] COPY ./resources/videos/person-bicycle-car-detection.mp4 /home/pipeline-server/resources/videos/person-bicycle-car-detection.mp4
#8 CACHED

#9 [dlstreamer-pipeline-server dlstreamer-pipeline-server 18/47] RUN MODEL_API_PATH=$(python3 -c "import site; print(site.getsitepackages()[0])")/model_api &&     cd $MODEL_API_PATH &&     git apply /home/pipeline-server/model_api.patch
#9 CACHED

#10 [dlstreamer-pipeline-server gstudfloader-builder 16/16] RUN /bin/bash -c "cd /home/pipeline-server/gst-udf-loader/     && if [ -d "build" ] ; then rm -rf build ; fi     && mkdir build     && cd gst_plugin && sed -i '/dlstreamer_gst_meta/c\\t/opt/intel/dlstreamer/build/intel64/Release/lib/libdlstreamer_gst_meta.so' CMakeLists.txt && cd ..     && cd build     && cmake -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DCMAKE_INSTALL_INCLUDEDIR=/opt/intel/eii/include -DCMAKE_INSTALL_PREFIX=/opt/intel/eii ..     && make"
#10 CACHED

#11 [dlstreamer-pipeline-server dlstreamer-pipeline-server 44/47] COPY ./user_scripts/gvapython/mqtt_publisher/ /home/pipeline-server/gvapython/mqtt_publisher
#11 CACHED

#12 [dlstreamer-pipeline-server gstudfloader-builder  2/16] WORKDIR /home/pipeline-server
#12 CACHED

#13 [dlstreamer-pipeline-server gstudfloader-builder  7/16] COPY packages/eii-messagebus-4.0.0-Linux.deb 
#13 CACHED

#14 [dlstreamer-pipeline-server dlstreamer-pipeline-server 11/47] RUN useradd -ms /bin/bash -G video,audio,users,plugdev intelmicroserviceuser -o -u 1999 &&     chown intelmicroserviceuser:intelmicroserviceuser -R /home/pipeline-server /root
#14 CACHED

#15 [dlstreamer-pipeline-server dlstreamer-pipeline-server 35/47] COPY ./user_scripts/udfs/python/dummy.py /home/pipeline-server/udfs/python/dummy.py
#15 CACHED

#16 [dlstreamer-pipeline-server dlstreamer-pipeline-server 30/47] RUN pip3 install --no-cache-dir PyYAML==5.4.1 --no-build-isolation &&     pip3 install --no-cache-dir                  -r  /home/pipeline-server/src/server/requirements.service.txt                  -r /home/pipeline-server/src/server/requirements.webrtc.txt                  -r /home/pipeline-server/src/server/requirements.txt &&     python3 -m pip install --no-cache-dir --upgrade Werkzeug==3.1.3 orjson==3.10.12 packaging==24.2 boto3==1.36.17
#16 CACHED

#17 [dlstreamer-pipeline-server dlstreamer-pipeline-server  5/47] COPY packages/eii-messagebus-4.0.0-Linux.deb 
#17 CACHED

#18 [dlstreamer-pipeline-server dlstreamer-pipeline-server  6/47] RUN dpkg -i /home/pipeline-server/eii-utils-4.0.0-Linux.deb &&     dpkg -i /home/pipeline-server/eii-messagebus-4.0.0-Linux.deb &&     rm -rf /home/pipeline-server/eii-*.deb &&     rm -rf /home/pipeline-server/packages
#18 CACHED

#19 [dlstreamer-pipeline-server dlstreamer-pipeline-server 10/47] COPY --from=gstudfloader-builder /home/pipeline-server/gst-udf-loader/build/gst_plugin/libgstudfloader.so /opt/intel/dlstreamer/gstreamer/lib
#19 CACHED

#20 [dlstreamer-pipeline-server dlstreamer-pipeline-server 22/47] RUN pip3 install --no-cache-dir asyncua==1.1.5
#20 CACHED

#21 [dlstreamer-pipeline-server gstudfloader-builder  5/16] COPY packages/eii-utils-4.0.0-Linux.deb 
#21 CACHED

#22 [dlstreamer-pipeline-server dlstreamer-pipeline-server 25/47] RUN apt-get update && apt-get install libxtst6 -y --no-install-recommends &&     apt clean &&     rm -rf /var/lib/apt/lists/*
#22 CACHED

#23 [dlstreamer-pipeline-server gstudfloader-builder  8/16] COPY packages/UDFLoader.zip 
#23 CACHED

#24 [dlstreamer-pipeline-server dlstreamer-pipeline-server  7/47] WORKDIR /home/pipeline-server
#24 CACHED

#25 [dlstreamer-pipeline-server gstudfloader-builder 12/16] COPY ./plugins/gst-udf-loader/ /home/pipeline-server/gst-udf-loader
#25 CACHED

#26 [dlstreamer-pipeline-server gstudfloader-builder  4/16] RUN apt-get update && apt-get install -y --no-install-recommends wget &&     wget -qO- https://cmake.org/files/v3.15/cmake-3.15.0-Linux-x86_64.tar.gz |     tar --strip-components=1 -xz -C /usr/local
#26 CACHED

#27 [dlstreamer-pipeline-server dlstreamer-pipeline-server 16/47] COPY ./docker/model_api.patch /home/pipeline-server/model_api.patch
#27 CACHED

#28 [dlstreamer-pipeline-server dlstreamer-pipeline-server 39/47] COPY ./resources/models/geti /home/pipeline-server/resources/models/geti
#28 CACHED

#29 [dlstreamer-pipeline-server dlstreamer-pipeline-server 36/47] COPY ./user_scripts/udfs/python/add_label.py /home/pipeline-server/udfs/python/add_label.py
#29 CACHED

#30 [dlstreamer-pipeline-server dlstreamer-pipeline-server 40/47] COPY ./resources/videos/classroom.avi /home/pipeline-server/resources/videos/classroom.avi
#30 CACHED

#31 [dlstreamer-pipeline-server gstudfloader-builder 14/16] RUN /bin/bash -c "echo /python3venv/bin:/python3venv/bin:/opt/intel/dlstreamer/gstreamer/bin:/opt/intel/dlstreamer/build/intel64/Release/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin &&                   pip3 install --no-cache-dir numpy==1.26.4 &&                   pip3 install --no-cache-dir Cython==0.29.34 &&                   cd /home/pipeline-server/UDFLoader &&                   rm -rf build &&                   mkdir build &&                   cd build &&                   cmake -DCMAKE_INSTALL_INCLUDEDIR=/opt/intel/eii/include -DCMAKE_INSTALL_PREFIX=/opt/intel/eii -DWITH_TESTS=${RUN_TESTS} -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}                   .. &&                   make &&                   if [ "${RUN_TESTS}" = "ON" ] ; then                      cd ./tests &&                      source ./source.sh &&                      ./frame-tests &&                      ./udfloader-tests &&                      cd .. ;                   fi &&                   make install"
#31 CACHED

#32 [dlstreamer-pipeline-server gstudfloader-builder 11/16] RUN unzip UDFLoader.zip -d /home/pipeline-server &&     unzip udfs.zip -d /home/pipeline-server &&     unzip util-4.0.0.zip -d /home/pipeline-server &&     rm -rf udfs.zip UDFLoader.zip util-*.zip
#32 CACHED

#33 [dlstreamer-pipeline-server dlstreamer-pipeline-server 17/47] RUN pip3 install --no-cache-dir openvino-model-api==0.2.5
#33 CACHED

#34 [dlstreamer-pipeline-server dlstreamer-pipeline-server  4/47] COPY packages/eii-utils-4.0.0-Linux.deb 
#34 CACHED

#35 [dlstreamer-pipeline-server dlstreamer-pipeline-server 24/47] RUN pip3 install --no-cache-dir pydantic==2.8.2
#35 CACHED

#36 [dlstreamer-pipeline-server dlstreamer-pipeline-server 32/47] RUN pip3 install --no-cache-dir --upgrade opentelemetry-exporter-otlp
#36 CACHED

#37 [dlstreamer-pipeline-server dlstreamer-pipeline-server  9/47] COPY --from=gstudfloader-builder /opt/intel/eii/lib/libeiiudfloader.so /opt/intel/dlstreamer/gstreamer/lib
#37 CACHED

#38 [dlstreamer-pipeline-server dlstreamer-pipeline-server 33/47] RUN opt_in_out --opt_out
#38 CACHED

#39 [dlstreamer-pipeline-server dlstreamer-pipeline-server 13/47] RUN mkdir -p /home/.cl_cache && chmod -R g+s /home/.cl_cache && chown intelmicroserviceuser:users /home/.cl_cache
#39 CACHED

#40 [dlstreamer-pipeline-server dlstreamer-pipeline-server 31/47] RUN pip3 install --no-cache-dir -r  /home/pipeline-server/src/opentelemetry/requirements.txt
#40 CACHED

#41 [dlstreamer-pipeline-server dlstreamer-pipeline-server 27/47] COPY ./docker/run.sh .
#41 CACHED

#42 [dlstreamer-pipeline-server gstudfloader-builder 10/16] RUN dpkg -i /home/pipeline-server/eii-utils-4.0.0-Linux.deb &&     dpkg -i /home/pipeline-server/eii-messagebus-4.0.0-Linux.deb &&     rm -rf eii-*.deb
#42 CACHED

#43 [dlstreamer-pipeline-server dlstreamer-pipeline-server 21/47] RUN pip3 install --no-cache-dir schedule==1.2.1
#43 CACHED

#44 [dlstreamer-pipeline-server dlstreamer-pipeline-server 34/47] RUN mkdir -p /home/pipeline-server/models
#44 CACHED

#45 [dlstreamer-pipeline-server dlstreamer-pipeline-server 14/47] RUN mkdir -p /home/.xdg_runtime_dir && chmod -R g+s /home/.xdg_runtime_dir && chown intelmicroserviceuser:users /home/.xdg_runtime_dir
#45 CACHED

#46 [dlstreamer-pipeline-server dlstreamer-pipeline-server 37/47] COPY ./user_scripts/udfs/python/dummy_publisher.py /home/pipeline-server/udfs/python/dummy_publisher.py
#46 CACHED

#47 [dlstreamer-pipeline-server gstudfloader-builder  3/16] RUN export no_proxy= &&     apt-get update --allow-releaseinfo-change && apt-get install -y --no-install-recommends git autoconf      automake     libglib2.0-dev     libusb-1.0-0-dev     libtool     zlib1g-dev     make     zip     unzip     libopencv-dev     libcjson-dev &&     rm -rf /var/lib/apt/lists/*
#47 CACHED

#48 [dlstreamer-pipeline-server gstudfloader-builder 13/16] RUN apt-get install -y --no-install-recommends python3-dev
#48 CACHED

#49 [dlstreamer-pipeline-server dlstreamer-pipeline-server 43/47] COPY ./user_scripts/gvapython/geti/ /home/pipeline-server/gvapython/geti
#49 CACHED

#50 [dlstreamer-pipeline-server dlstreamer-pipeline-server 19/47] RUN . /etc/os-release &&     if [ "$VERSION_ID" = "24.04" ]; then         apt-get update &&         apt-get install -y --no-install-recommends curl build-essential &&         curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain 1.87.0 &&         echo 'source $HOME/.cargo/env' >> ~/.bashrc &&         export PATH="/root/.cargo/bin:/python3venv/bin:/python3venv/bin:/opt/intel/dlstreamer/gstreamer/bin:/opt/intel/dlstreamer/build/intel64/Release/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/intel/dlstreamer/gstreamer/bin:/opt/intel/dlstreamer/gstreamer/bin/gstreamer-1.0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/root/.local/bin:/home/pipeline-server/.local/bin" &&         pip install --no-cache-dir --upgrade pip &&         pip install --no-cache-dir geti-sdk==2.7.1 &&         rm -rf /root/.cargo /root/.rustup;     else         pip install --no-cache-dir --upgrade pip &&         pip install --no-cache-dir geti-sdk==2.7.1;     fi &&     apt-get clean &&     rm -rf /var/lib/apt/lists/* /tmp/* /root/.cache
#50 CACHED

#51 [dlstreamer-pipeline-server dlstreamer-pipeline-server  8/47] COPY --from=gstudfloader-builder /opt/intel/eii/lib/udf.so /opt/intel/dlstreamer/gstreamer/lib
#51 CACHED

#52 [dlstreamer-pipeline-server dlstreamer-pipeline-server  3/47] RUN export no_proxy= &&     apt-get update --allow-releaseinfo-change && apt-get install -y --no-install-recommends git     libglib2.0-0     libusb-1.0-0     libtool     zlib1g     zip     unzip     libopencv-core4.5d     libcjson1 &&     apt clean &&     rm -rf /var/lib/apt/lists/*
#52 CACHED

#53 [dlstreamer-pipeline-server dlstreamer-pipeline-server 41/47] COPY ./resources/videos/warehouse.avi /home/pipeline-server/resources/videos/warehouse.avi
#53 CACHED

#54 [dlstreamer-pipeline-server dlstreamer-pipeline-server 29/47] COPY ./src/ ./src
#54 CACHED

#55 [dlstreamer-pipeline-server gstudfloader-builder  9/16] COPY packages/udfs.zip 
#55 CACHED

#56 [dlstreamer-pipeline-server dlstreamer-pipeline-server 28/47] COPY ./utils/*.py ./utils/
#56 CACHED

#57 [dlstreamer-pipeline-server dlstreamer-pipeline-server 26/47] RUN pip3 install --no-cache-dir deep_sort_realtime
#57 CACHED

#58 [dlstreamer-pipeline-server dlstreamer-pipeline-server 38/47] COPY ./user_scripts/udfs/python/geti_udf/ /home/pipeline-server/udfs/python/geti_udf/
#58 CACHED

#59 [dlstreamer-pipeline-server dlstreamer-pipeline-server 23/47] RUN pip3 uninstall --no-cache-dir -y Flask &&     pip3 install --no-cache-dir Flask==2.2.5
#59 CACHED

#60 [dlstreamer-pipeline-server gstudfloader-builder  6/16] COPY packages/util-4.0.0.zip 
#60 CACHED

#61 [dlstreamer-pipeline-server dlstreamer-pipeline-server 20/47] RUN pip3 uninstall --no-cache-dir -y cuda-python aiohappyeyeballs
#61 CACHED

#62 [dlstreamer-pipeline-server dlstreamer-pipeline-server 45/47] COPY ./user_scripts/gvapython/timestamp/ /home/pipeline-server/gvapython/timestamp
#62 CACHED

#63 [dlstreamer-pipeline-server dlstreamer-pipeline-server 12/47] RUN mkdir -p /home/intelmicroserviceuser/ && chown -R intelmicroserviceuser:intelmicroserviceuser /home/intelmicroserviceuser
#63 CACHED

#64 [dlstreamer-pipeline-server dlstreamer-pipeline-server 46/47] COPY ./user_scripts/gvapython/gva_event_meta /home/pipeline-server/gvapython/gva_event_meta
#64 CACHED

#65 [dlstreamer-pipeline-server dlstreamer-pipeline-server 47/47] COPY ./configs/default/config.json /home/pipeline-server/config.json
#65 DONE 0.1s

#66 [dlstreamer-pipeline-server] exporting to image
#66 exporting layers 0.0s done
#66 writing image sha256:eba7f4815c4a837d544b6214d4de61103fb7027d735bb850d6642c2977a9b68b done
#66 naming to docker.io/intel/dlstreamer-pipeline-server:3.1.0-ubuntu22 done
#66 DONE 0.1s

#67 [dlstreamer-pipeline-server] resolving provenance for metadata file
#67 DONE 0.0s
